package gucheng.slidingwindow;

import java.util.stream.IntStream;

// https://leetcode.com/problems/longest-repeating-character-replacement/
public class LongestRepeatingCharacterReplacement {
    public int characterReplacement(String s, int k) {

        int ans = 0 ;

        int[] charCount = new int[26];
        int leftIndex = 0 ;
        for(int rightIndex = 0 ; rightIndex < s.length() ; rightIndex++){

            charCount[s.charAt(rightIndex) - 'A']++;
            while(rightIndex - leftIndex +1 - IntStream.of(charCount).max().orElse(0) > k){
                charCount[s.charAt(leftIndex) - 'A']--;
                leftIndex ++;
            }
            ans = Math.max(ans , rightIndex - leftIndex+1);
        }

        return ans ;

    }


    public static void main(String args[]){

        LongestRepeatingCharacterReplacement  longest = new LongestRepeatingCharacterReplacement();

    //    System.out.println(longest.characterReplacement("ABAB" , 2));
  //      System.out.println(longest.characterReplacement("AABABBA" , 1));
//        System.out.println(longest.characterReplacement("ACABCAAA" , 2));
        System.out.println(longest.characterReplacement("BBBAAABABBAAAABBBAABAABAAABBBABBAABBABAAAAABBABABBABABBABAABBABAABAAABBAABBBBBAABABAABAAAABBABBAAABBBBBABABBBAABBBBABAAAABABBABBAABBAABAAAABBBBBAAABBABABABAABBBBABBBBABAABAABABABBBBBBAAABAAABBABAAAAABBABABBAABAAABBBBBAAABBBABABBBAABBABAAABBBBBBABABABAABBAAAABAAAABBABBABBBAAAABABAAABBAAABBABABABABABABAABAABAABBBABBAAAABBABABBAAABBABAABAABABBABAAAABBABABBBBAAAAAAABABABAABAAABBBABAAABABAAABBBABABABAABABBBAABBBABABABAABBABBAABAABAAAAABABBABBBABAAAABABABBAABBABBBBBBABAABABBBBBBAAAAABAABABABABBAABAABAABBAABBAABAABBABAABAABBBAAABAAABBABAABABBABBABAAAABAAAABABBBABAAABAABBBABBABAAABBABABBABABAABBABAABBBABBBBAABBBAAAAABBAAAABBABBAABBABBBAAAAAABABBAABBBBAABBBAABAAABBBABABAAABBABBABBBABAABAABBABBAAABBBBABAAAABAABBBAAABBAABBABBABAAAAABBABAAABBBBBBBBBABBABAABBABABABBBBBBBABBBBBABBBBBABBBBBBBABABBBBABABBABBABBABBABAABBBBBBABABABAABBAAABAAAABBBBABAAABBBABBBABABAABAABAABABBABABAAABABBAAAAABABBBBBAAABAABBBBBBAAAABBBBBABBABBABBBBBAABABBBBBAABBBBABBABBBBAABBBAAABABBABBABBBABAABAABABAAAAABBAABABBBAAABABABABBBBBABAAAABBABBBAABBBABABBABBBABBBABBABBABBBBAAAAABBBABBBBBABAABAAABBAABABABAAAABAABABAAABAABBBBAABBABABBBABBBBABAABBBBBABABBAABBABABBBAABAAABAABBBAAAAAABAABBABBAABBABBBBAABABAAABBBABAAAAABAABABBBAAABBAAAAAAAABBBBBAABAAABAABBAAAAAAABBAAAABBBBBBAABAAABABBBAABBAABABBABABBBBAAABBBAABAAAABABBBBBABBABBAABBBBABBAABBBAAAABABAAAAABBAABBBAABBBBBBAAABBABBAABBBBBBABAABABBBAAAABBAABBAABBABBAAABBABAAABBABABABAABABABBBAAABABBBBBAAAAABBABBBAAAABBBBBBABABBBAABBAAABBBBAAABBBBBABBBABBBAAAABBBABAABABBBAABABABBBBBBBBAABBAABBBABAABBBBBAAABABAABBAABAABABABBBAAABABBAABAABABAAAABABAABBABBBBBABABBAAAAABABBBABBBABABABBAAABAAAABABABBAABBBBAAABBBAAABABABAABBABAABABBAAABBBBBBABABBAABABBABAAABAABAABABBBBABAABABBBBABBAABABABABABBABBAABBAAAAAAABBBABBABABAAABAAABABAABAABAAABAAABAAABBAABAABAABAAAABABBAAABABBABBBABAABAABBAABBBABBBBBBBABBBBAAABABAAABBBBBAAABABABBBBBBBABBAABAABBBAABBABABAAABABBABAABBBAABABABABABBBAABAAAABAAABBAABBBABBBABBABABBAABABAAABBABBABBBBAABABAAAAAAABAAAABABBAAAAAABBAABBBBBABABABAABABBABBAABBABBAAAAAAAAABBBBAAABAABAAAAABBBABBAAAABAABBABAAAAABBBBBBABBAAABBBAAAABABBBAAABBBAABABABBBBABAAAABAAAAAAABAAAAABBABBBAAABAAAABBABBBBAABBABAABBBBABBBABABAAAABAABBBBBABAAABABAABBBBAAABABABBBBBABAABABAAABBAAAAABAAAAABAABABABABBBBBABBBBBBBAAABAABAAABAABBBBAABBABBBABAAAABBBBBAAAAABAABBBBBBAAABABABBABABABBBBAABBBBAABBABAAAABABAAAABAABABABBAAAAABABAAAABBABABBBAAAAABBAAAAAABAABAABBAABAABBBAABAABAAABBBBAAABABABBBAAABBBBABABBAAAAAAAABAAAABABABBBABAABBBBBBABBBBAAABBAAABAAABBBBABBBBABBAABBBBABABBBABBBBBBBABAABBABBBABBBBBABABABAAAABABBBAAABBBBABBBAAAABABBBBAAAAAAABBAAAABBBBABABBAABAABAABAABABAABAABAABBABBABBBAAAABAABBAABAAABBBBBAABBAABBBAABABBBAABAABAAABABABBAABAABBAAAAAAAAAABBABBBBBABBBBAABBAABABBAAAAABAABABBAABBABABAABAAAAABBAAABABBABAABBABBABBBBABABAAABABABAAABBBAAABAABABAABABBBBBBBAABBABAABAABBABAAABAABBAABBBAABAAABBABABAAABBAAAABBAAAAABBAAABABBABAAABBABAABABBBBABAABBBAAABBABABABBAAABABAABBAABABABABAABBBAABBBBAAABBBBAABBBAABABABAAABAAAAAAABABBBAAAABBAAAABBABBBAAABBAABBBAABBBABBABABBBAABABABBBBBBBAAAABABAABBBABAABAABBABBBBBBBAAAABBAABAAAAABAABBAABBABABAAABABBBABBAAAABBBAABBBBBBAAABAAAABBBBAAABABBBBAABBABABBAABBAAAABABBBBABAAAABABABAAAABBBBBBBABABAAABAAAAAAABAABBBBAABAABABBBBBBBABBAAABAAABABABAABAAABBAAABBBAABABBBABBBBAAABBABAABBAAABAABBAABAAAAABABBAAAAAABBAAAAAAAAAAAAAAABAABAAABAAABBAAABBBABBBBBBBAAAAABAAAAABAAABAABAAABAAABAAAAAABAAABAABBBAAABABABABBABAAABAAABAABBABABABAAAAAAAABABABAABBABBAAABABABAABAAAAABAAABABABBBABAAAAABBABAABABABAAABABABAABABABABBABBABBBBBABBBBBAABABBABBAABBAAABBBABBBBBABBBBAABAAAAABABAABBBBBBBABABAABBBAAABBBBBAABBAABBBBBABAABABBBAABBBAABABAABBBBAABBAAAAABAABABABABAABBABABAAAABABABBABABABAABBAABAABAABABAAABAAAAAABAAABBABAABBBBBAABBBABBABABABAABBBABAABAABAABBBABBBAABBAAAABABBBABABBBBAABABBAABABBBABBABBAABBBBABAAABBBBAAAABABABBBABAABBAAABAABBABAABBAABBABAABBBBBABAAAABABBAAABBABAABBABBABAABBABBBABABBABBBBABBBABBABBBAABBABBBBABABBBABBBAAAAABAAAABBABAAAABABBAABAABBBABABAAABBBBAAAAABAAABBBBBBABABBABBABBBAAAABABABBBAABAABBBABABAAAAABAABAABBBAAABABBABABABAABABABAABAAABABAAABBABAAABABBAAAABBBAABBBBAABAABAAABABBABBAAAAAABBABBABBBBBABAAAAABBBBBABABBBBBABBBAABBAABABBBABBBAAAAAABBAABBBBABBAABBBBAAABBBBAABBAABBAABABBAAAAAABBABABBABAAABBBBAABAAAABBBABAAABABBABABBABBBBABAAABBABBBAAABABABBBBAAAABBBBAAABAAAAAAABAAAABAABBBBBBAAABBAABBBAAABBABAABBABABAABBBABAABBABAABBABBAABABBAAAAABABABBABBAAAAAABBABBABBABAABBBBBBABABBABAAABBBBBABABAAABABBAAAABABAAAABBAAABAABABBABAABBAABBBBBAABBBBAAAAAAABAAABAABBBBBABAAAABAABAABBBBABBBABABBABABAAABABAABAABABABAAAAAAABABAABBBAABABABAABBAABABBAABAAAABBBABBAAABABBABBAABBAABBBAAABABABBABABAAABBBABAABBBAABBAAABAAABABBABABBAABBAAAAAABBBBABBABBABBAAAABBBABAABBABBAAAABABBAABBABBABAAABBAABBBBAABABBAAAAABBAAAABABAAABABBABBAAABABABABBABAABABBABBBBBABBABBAAAAABABBBBAABBABAABAABABABBAAAAABBAAAABABBABBAABBBBBAABBABBAAABBAABABBABABABBBABAAABBABBBBBAABBBBABAABBBAABABBABBAAABABBBBABBAABAAAAABAAAAAAAAAABAABBAAAAABBABAAABABBBBBBBBBAAAAABBBABBAABAAAABBABBAABBABAAAABABBBABBBBAAAABABBAAABABAABABBBAAAABABBBAAAABAAAABBBAAABBAAAAABABBBABBABBBBBAABBBABBABAABABBBAABAABBBBAABBABBABBBABABBBBBAABBBBBABAABBBBABAAAABABAAABABABAABAAABBBABABABABAAABABBBABBBAAABAABBBABBABBBABBBABABAABABABABBABABBBABABAAABAABAABAAAABAAABAABBBABBABBAAABBABAABBABABAABBBABBABBABBBBBBBBAABABBBBBABABBBABBBAABBBAAAAABBBBAABBABBBAABABBAAABAAABBBBBAABAAAAABAAABABBBAABAABABAAABABABAABBBBABABBAABAABBABBABBAABABBBBBABBABBBAAAAAABAABBBBBBABABABBBABAABBBBAABABAABBBBBAABABBABABABAABABAAABBABABAAABBBAAAAAAABBAABAAAABAABABBBAABBBBBABAABAABABABABBAAABABABBAAABBBABBBBABAAABABAABAABBABAAAABBBBBBABBBAAABABABBABBAAAAABABABBAABBBABBABBBBABBABAABAAAABBBABBBBBABAAABABBBAABBBAAAAABBABAAABABAAABBBAABABABAABBBAABAAABBAABBAAABABABAAABAABABAABAABBAAABABBBAABBABABBABBAAABAAABBBBAAAABBAABAABABBBABAAAAABABAAAAABBBBBBBAAAAAAABABBABBBABBAAAAABABAABAABBABBAAABBBABAABAAABBAABABAAABBBABABBAABAAAABAABBBBBAAAABBBBABBBABAABAABAABABAABBBBBABABABABAABBBBBAAABAAABAAABBAAABAAAAABAAABABAAAAABBBAABAABAAAAABAAAAABBBABABBBABABBAABBAABBABBABBAAAABABBAABBABAAAABBBBAAABAAABAAAAABBAAAABAAABBBBAAABABBBABBAABAAABBBBABAABBAABBBAABABBAABBBAAABBBAAABBBABABBBABABBBBBAABBBAABAABBBAABBABBAABABABABAABAABBBABBAABBBBAAAABABBABAAAAABBAABAABBBBBABAABBBBAAAAABAAAABBAAABBBAABAABABAAAAABBAAAAAABBBABAABBBAABAAABAABAAABBABBBABBBAABBAABBAAAABABABABBABBBBAAAAABBBBAABAAABBBABABABAAAABAAAABABBBAAAABABBBAAABBBAAAABBABBAAAAABBBAAABAABBBAAAABAABBBABAAABBBABBBBABBBAAAAABBAAABABAABAABABAAABBBBBBBBBBBBAAAABAABBABAAAAAAABBBBBBBBAABBBBBBABABBAABAABBAAABAABABAABABAABABBABAABBBBABAABBABBBBAAAAAAABBBBAABBBABBAAAAABBBAAABABAAABBAAAAABABAAABAABAABABABBBABBAAABBBBAAABAAAAAABBABBBBBAAABBBBBBBBBBBAAAABAAABBABBAAAAAAAABABBABAAABABBABAABBABBABABBBBAABBAAABBBBABABABBABABABBBABBABBABAAAAAAABABBBAABBABBABBBABABAABAABAAAAABBBABBAAABBBBAAABABABBAAABBBBBBBBBABABAAAAABBAABBBABBBABABABBBBBABABABABAABBAABBABAABBBABBBBABBABABABABBBBAAABBBABBBBABABBBAABBABABABBAAABABBAAAABBBAAABAAAABBBABAABBAABBBABBBBAAAAABAABABABBBABBBAAABAABAABAABABAABABBABAABAABBBAAABBBAAAAABBABABBBBBABBAABBBABABBBBBBAAABABAAABAAAAAABBAABBABABAAABBABBABAAABAABBAAAAAABBBABBBAABAAAAAABBABAAABBAAABBBAAABAAAAAABAAABBBAAAABBAABAAAABAAAABBABAAAAAAABABBBBAAAABAAABBBBBBAABAAABABABBBABBBABAAAABBBBBABBAAABAABBABBBAAABBBABBBBABABBBABBBAAABABAAABBBAAABAABBABAABBAAABAAABBABAABABAAABAAAABBABBBAABBAAAABAAAAABABAABABBBBABBBAABBAAAABABAAAABAABAABAABAAAAABBBBABABABBAAABABBAABBBBAAAAAAABAABBBBBAAABAAAABBAAABABABBABBBAABAABABBBAABBBABAAABBBBAABABABABBBBBABABABBAABAABAABBBBBABBBBBBBABAAAABABAABAABABBBBBBAAAABBAAAAAAABABAAAAABBAAAABAABBABAABBAABBABBAAABBBBABBABAABAABABAAABABBAAAABABBBBBBBAAABABABBBAABABAABBBBABBBAAABAABBABBBAAABBAAABAAAABBBBABBBBBBAABABBABBAAAAABAABABAAABAAABBBBBBABABBABABBABBABABBBAABBAABAAABBAABBBABABBBBABBABBBABBAABBBBBBABBBAABAABBBBBBAAABAAAAAABBAABABABAAAAABAAABBABBBABBBBBAAAAABBABBBBBAAABBABAABAAAAAABBABABBBBBBBABBABABABBBABBABBABBBBBBBBBABAAABABAABBBBBAABAAAAABBBAABBBABAABBBABBBBBBBBABBBBBAABBBABBBAAAABABAABAABBBBABBBAAAAABABAABAAABBAABBBAABBABABAAAABAAAABBBBAABAABBBBAABBAABAAAABBBAABBABBBABABBBAAAAABBAABBBAAAABBAABBBBBABAABABAABBBAAABABBBABBBABAABBAABAABAABABABBBBBBAABAAAABABAABAAABBBBABBBBABBAABBBBAAABBBABABABBBABBBABBBABABAABAAABAAABAABBAABBABAAAAAAABBBAAAAAABAAABABAABABAAABAAABBBBBABAAABABBAAAABBBABABABBBABAABAAABAAABBBAABBABBABABBBBBABAABABBABABAABAABBBBBBBBBBBABBBBABAAAABAAABAAAAAAAABABABBABBBBABBBABBAAAAABBBABBBABABABBAAABBBABBBAABABABABBBABBAABABBBBBBABABABBABABABAABAAABAABABBABABBBABBABBBBAAAABBAAABAAABAAAAAAABBBBAABBAAABAABABBABAABBAAAABBAAAABBBAABBBBABABAABABBAABAABAAABAABABABBBBBBABBBAABBAAAABAAAAAABAAABBABBBBABAAAAAABBABBAAAABABABBBBAAABAABBAABBBBAABBABAABABABBABBABAABABAAABBAAABABBAAAAAAAABAAAABAAAABABBAABAABBBAAAABBBAABAABBABBBAABBBAAABBBBBBAAABAAAAAABBABBABABBAAABABAAABABBBBAAABBBABBAABBAABBAAABBBBBABAAABBBABBBBABBBBBAABBBAABBABBAABBBBAAAABABAABAABBBAABAABBBBBAAAAABAAAABABAAABAAABABBBABABABAAABBAAABAAAABBAAAABBBBAAAAABBABAAABBBBABBBBBAAABAABABBABBBAABBBABABAABAAAAABAABBABBBBBAABBBAAABABBAABBBAAABABBBAAAAABBBBBABBBBAABAAAABBAABAAABAABAAABBABABBBABAABAABBBABAAAABABBAAAAABBBAAABBBAAAAABBABABBBABABABABBAABAABBBABABABABBABAABAAABABABBAAABBABBABABABAABAAAAAABBAABABAABABBBAAABABAABAABBBAAABBBABBBBAAAAAAABAAABABAABBBBABABBBBABABBAAABBABAAABAABAAABBBBABBBBAABAABBAAABBAABABABBABAABABBBABABAAAABAABAABBAAAABBBABBAAAABAAAAABAAAABBAABBABABABAAABBBABABBAABBAAABABAAABAABBBBAABBBBBAABABBBBBAAABAABABAAAAAAABBABAABABAABABABAAAAAABBABBBBBAABAABAABAAABBBBBABBBAABABABAABBBBAAAAAAABBAAABBAABABABAAAAAABABAABBABBBAABABABBAABAABBBAAAABBAAAAAABBBABABAABABBBAAABBABAABBBBAABAAABABBBABABBBAABAAAAAABABAABABBBBABBABABBABBABBBBBBBBAAAAABABAABABBBBABAAABBAAAABBBBBBABAABBAABABBBAAABAAAABBBAABAAAABABAAAAAAAABAABAAAABAABBABBBBAABBBBBAABAAABABAAAABBBBBBABABBBABBAAABBBBABAAAAABAABBAABABBBBBABBAAAABABBBBBAABBBAAAABAABAAABBABABBBAAABABABABABBABABABAAAABAAABBBBBAABAAAAAABBABBAAABAABBBBABAABBBBABAAAABAAABBABBAABBBABBABABAAAAAABABABBBAAAABBBBBBBAAAABAAAAABBBABABBBAAABAABBABABABAAABAABBABBBABBAABBBABBBABAABABBBBBBAAABAABABBABBBAAABAABABABBBABBAAAAABBBBAABBABBBAABABAAABAAABAAABABABAAABBABAABAABAABABAABBABBBABABABBBAAABBAAAAABBAAAAABAAAABBABA" , 80));
    }
}
